<!DOCTYPE html>
<html>
<body>

<h2>Введите ник</h2>
<input id="nick">
<button id="send">Отправить</button>

<script type="module">
import { auth, db } from "./firebase.js";
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

onAuthStateChanged(auth, user => {
  if (!user) location.href = "index.html";

  document.getElementById("send").onclick = async () => {
    await updateDoc(doc(db, "users", user.uid), {
      nick: document.getElementById("nick").value,
      situation: "requested"
    });
    alert("Отправлено");
  };
});
</script>

</body>
</html>
